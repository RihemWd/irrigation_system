{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/arrosage.service\";\nimport * as i2 from \"../../services/meteo.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ProgrammesComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 8);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(1);\n    i0.…µ…µtextInterpolate1(\" \", ctx_r0.success, \" \");\n  }\n}\nfunction ProgrammesComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 9);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(1);\n    i0.…µ…µtextInterpolate1(\" \", ctx_r1.error, \" \");\n  }\n}\nfunction ProgrammesComponent_div_8_div_33_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"option\", 34);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const station_r8 = ctx.$implicit;\n    i0.…µ…µproperty(\"value\", station_r8.id);\n    i0.…µ…µadvance(1);\n    i0.…µ…µtextInterpolate1(\" \", station_r8.nom, \" \");\n  }\n}\nfunction ProgrammesComponent_div_8_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 12)(1, \"label\", 31);\n    i0.…µ…µtext(2, \"Station M\\u00E9t\\u00E9o\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"select\", 32);\n    i0.…µ…µlistener(\"ngModelChange\", function ProgrammesComponent_div_8_div_33_Template_select_ngModelChange_3_listener($event) {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r9 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r9.newProgramme.stationMeteoId = $event);\n    });\n    i0.…µ…µtemplate(4, ProgrammesComponent_div_8_div_33_option_4_Template, 2, 2, \"option\", 33);\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.…µ…µnextContext(2);\n    i0.…µ…µadvance(3);\n    i0.…µ…µproperty(\"ngModel\", ctx_r6.newProgramme.stationMeteoId);\n    i0.…µ…µadvance(1);\n    i0.…µ…µproperty(\"ngForOf\", ctx_r6.stations);\n  }\n}\nfunction ProgrammesComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 10)(1, \"h3\");\n    i0.…µ…µtext(2, \"Nouveau Programme d'Arrosage\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"form\", 11);\n    i0.…µ…µlistener(\"ngSubmit\", function ProgrammesComponent_div_8_Template_form_ngSubmit_3_listener() {\n      i0.…µ…µrestoreView(_r12);\n      const ctx_r11 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r11.createProgramme());\n    });\n    i0.…µ…µelementStart(4, \"div\", 12)(5, \"label\", 13);\n    i0.…µ…µtext(6, \"Date de D\\u00E9but *\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(7, \"input\", 14);\n    i0.…µ…µlistener(\"ngModelChange\", function ProgrammesComponent_div_8_Template_input_ngModelChange_7_listener($event) {\n      i0.…µ…µrestoreView(_r12);\n      const ctx_r13 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r13.newProgramme.dateDebut = $event);\n    });\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(8, \"div\", 15)(9, \"div\", 12)(10, \"label\", 16);\n    i0.…µ…µtext(11, \"Heure (0-23) *\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(12, \"input\", 17);\n    i0.…µ…µlistener(\"ngModelChange\", function ProgrammesComponent_div_8_Template_input_ngModelChange_12_listener($event) {\n      i0.…µ…µrestoreView(_r12);\n      const ctx_r14 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r14.newProgramme.heure = $event);\n    });\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(13, \"div\", 12)(14, \"label\", 18);\n    i0.…µ…µtext(15, \"Dur\\u00E9e (minutes) *\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(16, \"input\", 19);\n    i0.…µ…µlistener(\"ngModelChange\", function ProgrammesComponent_div_8_Template_input_ngModelChange_16_listener($event) {\n      i0.…µ…µrestoreView(_r12);\n      const ctx_r15 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r15.newProgramme.duree = $event);\n    });\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µelementStart(17, \"div\", 12)(18, \"label\", 20);\n    i0.…µ…µtext(19, \"Volume d'Eau (Litres) *\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(20, \"input\", 21);\n    i0.…µ…µlistener(\"ngModelChange\", function ProgrammesComponent_div_8_Template_input_ngModelChange_20_listener($event) {\n      i0.…µ…µrestoreView(_r12);\n      const ctx_r16 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r16.newProgramme.volumeEau = $event);\n    });\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(21, \"div\", 12)(22, \"label\", 22);\n    i0.…µ…µtext(23, \"\\u00C9tat Initial *\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(24, \"select\", 23);\n    i0.…µ…µlistener(\"ngModelChange\", function ProgrammesComponent_div_8_Template_select_ngModelChange_24_listener($event) {\n      i0.…µ…µrestoreView(_r12);\n      const ctx_r17 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r17.newProgramme.etatPrevuInitial = $event);\n    });\n    i0.…µ…µelementStart(25, \"option\", 24);\n    i0.…µ…µtext(26, \"PLANIFIE\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(27, \"option\", 25);\n    i0.…µ…µtext(28, \"AJUSTE\");\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µelementStart(29, \"div\", 26)(30, \"input\", 27);\n    i0.…µ…µlistener(\"ngModelChange\", function ProgrammesComponent_div_8_Template_input_ngModelChange_30_listener($event) {\n      i0.…µ…µrestoreView(_r12);\n      const ctx_r18 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r18.useMeteo = $event);\n    });\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(31, \"label\", 28);\n    i0.…µ…µtext(32, \"\\uD83C\\uDF24\\uFE0F Utiliser les donn\\u00E9es m\\u00E9t\\u00E9o pour ajuster automatiquement\");\n    i0.…µ…µelementEnd()();\n    i0.…µ…µtemplate(33, ProgrammesComponent_div_8_div_33_Template, 5, 2, \"div\", 29);\n    i0.…µ…µelementStart(34, \"button\", 30);\n    i0.…µ…µtext(35);\n    i0.…µ…µelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(7);\n    i0.…µ…µproperty(\"ngModel\", ctx_r2.newProgramme.dateDebut);\n    i0.…µ…µadvance(5);\n    i0.…µ…µproperty(\"ngModel\", ctx_r2.newProgramme.heure);\n    i0.…µ…µadvance(4);\n    i0.…µ…µproperty(\"ngModel\", ctx_r2.newProgramme.duree);\n    i0.…µ…µadvance(4);\n    i0.…µ…µproperty(\"ngModel\", ctx_r2.newProgramme.volumeEau);\n    i0.…µ…µadvance(4);\n    i0.…µ…µproperty(\"ngModel\", ctx_r2.newProgramme.etatPrevuInitial);\n    i0.…µ…µadvance(6);\n    i0.…µ…µproperty(\"ngModel\", ctx_r2.useMeteo);\n    i0.…µ…µadvance(3);\n    i0.…µ…µproperty(\"ngIf\", ctx_r2.useMeteo && ctx_r2.stations.length > 0);\n    i0.…µ…µadvance(1);\n    i0.…µ…µproperty(\"disabled\", ctx_r2.loading);\n    i0.…µ…µadvance(1);\n    i0.…µ…µtextInterpolate1(\" \", ctx_r2.loading ? \"Cr\\u00E9ation...\" : \"\\u2705 Cr\\u00E9er le Programme\", \" \");\n  }\n}\nfunction ProgrammesComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 35);\n    i0.…µ…µtext(1, \" Chargement des programmes \");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction ProgrammesComponent_div_10_div_1_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\")(1, \"p\")(2, \"strong\");\n    i0.…µ…µtext(3, \"\\uD83C\\uDF21\\uFE0F Temp\\u00E9rature Max:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(4);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(5, \"p\")(6, \"strong\");\n    i0.…µ…µtext(7, \"\\uD83C\\uDF21\\uFE0F Temp\\u00E9rature Min:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(8);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(9, \"p\")(10, \"strong\");\n    i0.…µ…µtext(11, \"\\uD83C\\uDF27\\uFE0F Pluie:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(12);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(13, \"p\")(14, \"strong\");\n    i0.…µ…µtext(15, \"\\uD83D\\uDCA8 Vent:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(16);\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const programme_r20 = i0.…µ…µnextContext().$implicit;\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate1(\" \", programme_r20.temperatureMax, \"\\u00B0C\");\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate1(\" \", programme_r20.temperatureMin, \"\\u00B0C\");\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate1(\" \", programme_r20.pluiePrevue ? \"Oui\" : \"Non\", \"\");\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate1(\" \", programme_r20.vent, \" km/h\");\n  }\n}\nfunction ProgrammesComponent_div_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 10)(1, \"div\", 38)(2, \"h3\");\n    i0.…µ…µtext(3);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(4, \"span\", 39);\n    i0.…µ…µtext(5);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(6, \"p\")(7, \"strong\");\n    i0.…µ…µtext(8, \"\\uD83D\\uDCC5 Date:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(9);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(10, \"p\")(11, \"strong\");\n    i0.…µ…µtext(12, \"\\u23F1\\uFE0F Dur\\u00E9e:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(13);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(14, \"p\")(15, \"strong\");\n    i0.…µ…µtext(16, \"\\uD83D\\uDCA7 Volume:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(17);\n    i0.…µ…µelementEnd();\n    i0.…µ…µtemplate(18, ProgrammesComponent_div_10_div_1_div_18_Template, 17, 4, \"div\", 40);\n    i0.…µ…µelementStart(19, \"div\", 41)(20, \"button\", 42);\n    i0.…µ…µlistener(\"click\", function ProgrammesComponent_div_10_div_1_Template_button_click_20_listener() {\n      const restoredCtx = i0.…µ…µrestoreView(_r24);\n      const programme_r20 = restoredCtx.$implicit;\n      const ctx_r23 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r23.executerProgramme(programme_r20.id));\n    });\n    i0.…µ…µtext(21, \" \\u25B6\\uFE0F Ex\\u00E9cuter \");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(22, \"button\", 43);\n    i0.…µ…µlistener(\"click\", function ProgrammesComponent_div_10_div_1_Template_button_click_22_listener() {\n      const restoredCtx = i0.…µ…µrestoreView(_r24);\n      const programme_r20 = restoredCtx.$implicit;\n      const ctx_r25 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r25.deleteProgramme(programme_r20.id));\n    });\n    i0.…µ…µtext(23, \" \\uD83D\\uDDD1\\uFE0F Supprimer \");\n    i0.…µ…µelementEnd()()();\n  }\n  if (rf & 2) {\n    const programme_r20 = ctx.$implicit;\n    const ctx_r19 = i0.…µ…µnextContext(2);\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate1(\"\\uD83D\\uDCA7 Programme #\", programme_r20.id, \"\");\n    i0.…µ…µadvance(1);\n    i0.…µ…µproperty(\"ngClass\", ctx_r19.getStatutBadgeClass(programme_r20.etatPrevuInitial));\n    i0.…µ…µadvance(1);\n    i0.…µ…µtextInterpolate1(\" \", programme_r20.etatPrevuInitial, \" \");\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate2(\" \", programme_r20.dateDebut, \" \\u00E0 \", programme_r20.heure, \"h\");\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate1(\" \", programme_r20.duree, \" minutes\");\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate1(\" \", programme_r20.volumeEau, \" L\");\n    i0.…µ…µadvance(1);\n    i0.…µ…µproperty(\"ngIf\", programme_r20.temperatureMax);\n  }\n}\nfunction ProgrammesComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 36);\n    i0.…µ…µtemplate(1, ProgrammesComponent_div_10_div_1_Template, 24, 8, \"div\", 37);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(1);\n    i0.…µ…µproperty(\"ngForOf\", ctx_r4.programmes);\n  }\n}\nfunction ProgrammesComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 44)(1, \"p\", 45);\n    i0.…µ…µtext(2, \"Aucun programme d'arrosage enregistr\\u00E9.\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"p\");\n    i0.…µ…µtext(4, \"Cliquez sur \\\"Nouveau Programme\\\" pour en cr\\u00E9er un.\");\n    i0.…µ…µelementEnd()();\n  }\n}\nexport class ProgrammesComponent {\n  constructor(arrosageService, meteoService) {\n    this.arrosageService = arrosageService;\n    this.meteoService = meteoService;\n    this.programmes = [];\n    this.stations = [];\n    this.loading = false;\n    this.error = null;\n    this.success = null;\n    this.showForm = false;\n    this.useMeteo = false;\n    this.newProgramme = {\n      dateDebut: '',\n      heure: 8,\n      duree: 30,\n      volumeEau: 100,\n      etatPrevuInitial: 'PLANIFIE',\n      stationMeteoId: 0\n    };\n  }\n  ngOnInit() {\n    this.loadProgrammes();\n    this.loadStations();\n  }\n  loadProgrammes() {\n    this.loading = true;\n    this.error = null;\n    this.arrosageService.getAllProgrammes().subscribe({\n      next: data => {\n        this.programmes = data;\n        this.loading = false;\n      },\n      error: err => {\n        this.error = 'Erreur lors du chargement des programmes: ' + err.message;\n        this.loading = false;\n      }\n    });\n  }\n  loadStations() {\n    this.meteoService.getAllStations().subscribe({\n      next: data => {\n        this.stations = data;\n        if (data.length > 0) {\n          this.newProgramme.stationMeteoId = data[0].id;\n        }\n      },\n      error: err => {\n        console.error('Erreur lors du chargement des stations:', err);\n      }\n    });\n  }\n  toggleForm() {\n    this.showForm = !this.showForm;\n    if (!this.showForm) {\n      this.resetForm();\n    }\n  }\n  createProgramme() {\n    this.loading = true;\n    this.error = null;\n    this.success = null;\n    const programmeData = {\n      dateDebut: this.newProgramme.dateDebut,\n      heure: this.newProgramme.heure,\n      duree: this.newProgramme.duree,\n      volumeEau: this.newProgramme.volumeEau,\n      etatPrevuInitial: this.newProgramme.etatPrevuInitial\n    };\n    if (this.useMeteo && this.newProgramme.stationMeteoId) {\n      programmeData['stationMeteoId'] = this.newProgramme.stationMeteoId;\n    }\n    this.arrosageService.createProgramme(programmeData).subscribe({\n      next: programme => {\n        this.success = 'Programme d\\'arrosage cr√©√© avec succ√®s!';\n        this.loadProgrammes();\n        this.resetForm();\n        this.showForm = false;\n        setTimeout(() => this.success = null, 3000);\n      },\n      error: err => {\n        this.error = 'Erreur lors de la cr√©ation: ' + err.message;\n        this.loading = false;\n      }\n    });\n  }\n  executerProgramme(id) {\n    if (confirm('Voulez-vous ex√©cuter ce programme maintenant ?')) {\n      this.arrosageService.executerProgramme(id).subscribe({\n        next: journal => {\n          this.success = `Programme ex√©cut√©! Journal #${journal.id} cr√©√© avec ${journal.volumeReel}L`;\n          this.loadProgrammes();\n          setTimeout(() => this.success = null, 5000);\n        },\n        error: err => {\n          this.error = 'Erreur lors de l\\'ex√©cution: ' + err.message;\n        }\n      });\n    }\n  }\n  deleteProgramme(id) {\n    if (confirm('√ätes-vous s√ªr de vouloir supprimer ce programme ?')) {\n      this.arrosageService.deleteProgramme(id).subscribe({\n        next: () => {\n          this.success = 'Programme supprim√© avec succ√®s!';\n          this.loadProgrammes();\n          setTimeout(() => this.success = null, 3000);\n        },\n        error: err => {\n          this.error = 'Erreur lors de la suppression: ' + err.message;\n        }\n      });\n    }\n  }\n  resetForm() {\n    const today = new Date().toISOString().split('T')[0];\n    this.newProgramme = {\n      dateDebut: today,\n      heure: 8,\n      duree: 30,\n      volumeEau: 100,\n      etatPrevuInitial: 'PLANIFIE',\n      stationMeteoId: this.stations.length > 0 ? this.stations[0].id : 0\n    };\n    this.useMeteo = false;\n  }\n  getStatutBadgeClass(statut) {\n    switch (statut) {\n      case 'PLANIFIE':\n        return 'badge-info';\n      case 'AJUSTE':\n        return 'badge-warning';\n      case 'TERMINE':\n        return 'badge-success';\n      case 'IGNORE':\n        return 'badge-danger';\n      default:\n        return 'badge-info';\n    }\n  }\n  getStationName(stationId) {\n    const station = this.stations.find(s => s.id === stationId);\n    return station ? station.nom : `Station #${stationId}`;\n  }\n  static {\n    this.…µfac = function ProgrammesComponent_Factory(t) {\n      return new (t || ProgrammesComponent)(i0.…µ…µdirectiveInject(i1.ArrosageService), i0.…µ…µdirectiveInject(i2.MeteoService));\n    };\n  }\n  static {\n    this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n      type: ProgrammesComponent,\n      selectors: [[\"app-programmes\"]],\n      decls: 12,\n      vars: 7,\n      consts: [[2, \"display\", \"flex\", \"justify-content\", \"space-between\", \"align-items\", \"center\", \"margin-bottom\", \"20px\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [\"class\", \"alert alert-error\", 4, \"ngIf\"], [\"class\", \"card\", 4, \"ngIf\"], [\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"grid\", 4, \"ngIf\"], [\"style\", \"text-align: center; padding: 40px; color: #999;\", 4, \"ngIf\"], [1, \"alert\", \"alert-success\"], [1, \"alert\", \"alert-error\"], [1, \"card\"], [3, \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"dateDebut\"], [\"type\", \"date\", \"id\", \"dateDebut\", \"name\", \"dateDebut\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [2, \"display\", \"grid\", \"grid-template-columns\", \"1fr 1fr\", \"gap\", \"15px\"], [\"for\", \"heure\"], [\"type\", \"number\", \"id\", \"heure\", \"name\", \"heure\", \"min\", \"0\", \"max\", \"23\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"duree\"], [\"type\", \"number\", \"id\", \"duree\", \"name\", \"duree\", \"min\", \"1\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"volumeEau\"], [\"type\", \"number\", \"id\", \"volumeEau\", \"name\", \"volumeEau\", \"min\", \"1\", \"step\", \"0.1\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"etatPrevuInitial\"], [\"id\", \"etatPrevuInitial\", \"name\", \"etatPrevuInitial\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"PLANIFIE\"], [\"value\", \"AJUSTE\"], [1, \"form-group\", 2, \"display\", \"flex\", \"align-items\", \"center\", \"gap\", \"10px\"], [\"type\", \"checkbox\", \"id\", \"useMeteo\", \"name\", \"useMeteo\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"useMeteo\", 2, \"margin\", \"0\"], [\"class\", \"form-group\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"disabled\"], [\"for\", \"stationMeteoId\"], [\"id\", \"stationMeteoId\", \"name\", \"stationMeteoId\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"loading\"], [1, \"grid\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [2, \"display\", \"flex\", \"justify-content\", \"space-between\", \"align-items\", \"center\", \"margin-bottom\", \"10px\"], [1, \"badge\", 3, \"ngClass\"], [4, \"ngIf\"], [2, \"margin-top\", \"15px\", \"display\", \"flex\", \"gap\", \"10px\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [2, \"text-align\", \"center\", \"padding\", \"40px\", \"color\", \"#999\"], [2, \"font-size\", \"18px\"]],\n      template: function ProgrammesComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.…µ…µelementStart(0, \"div\")(1, \"div\", 0)(2, \"h2\");\n          i0.…µ…µtext(3, \"\\uD83D\\uDCA7 Programmes d'Arrosage\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(4, \"button\", 1);\n          i0.…µ…µlistener(\"click\", function ProgrammesComponent_Template_button_click_4_listener() {\n            return ctx.toggleForm();\n          });\n          i0.…µ…µtext(5);\n          i0.…µ…µelementEnd()();\n          i0.…µ…µtemplate(6, ProgrammesComponent_div_6_Template, 2, 1, \"div\", 2);\n          i0.…µ…µtemplate(7, ProgrammesComponent_div_7_Template, 2, 1, \"div\", 3);\n          i0.…µ…µtemplate(8, ProgrammesComponent_div_8_Template, 36, 9, \"div\", 4);\n          i0.…µ…µtemplate(9, ProgrammesComponent_div_9_Template, 2, 0, \"div\", 5);\n          i0.…µ…µtemplate(10, ProgrammesComponent_div_10_Template, 2, 1, \"div\", 6);\n          i0.…µ…µtemplate(11, ProgrammesComponent_div_11_Template, 5, 0, \"div\", 7);\n          i0.…µ…µelementEnd();\n        }\n        if (rf & 2) {\n          i0.…µ…µadvance(5);\n          i0.…µ…µtextInterpolate1(\" \", ctx.showForm ? \"\\u274C Annuler\" : \"\\u2795 Nouveau Programme\", \" \");\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", ctx.success);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", ctx.error);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", ctx.showForm);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", ctx.loading && !ctx.showForm);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", !ctx.loading && ctx.programmes.length > 0);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", !ctx.loading && ctx.programmes.length === 0 && !ctx.showForm);\n        }\n      },\n      dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i4.…µNgNoValidate, i4.NgSelectOption, i4.…µNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.CheckboxControlValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.MinValidator, i4.MaxValidator, i4.NgModel, i4.NgForm],\n      styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9wcm9ncmFtbWVzL3Byb2dyYW1tZXMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQ0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBQcm9ncmFtbWVzIENvbXBvbmVudCBTdHlsZXMgKi9cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","ProgrammesComponent","constructor","arrosageService","meteoService","dateDebut","heure","duree","volumeEau","etatPrevuInitial","stationMeteoId","ngOnInit","loadProgrammes","loadStations","loading","error","getAllProgrammes","subscribe","next","data","programmes","err","message","getAllStations","stations","length","newProgramme","id","console","toggleForm","showForm","resetForm","createProgramme","success","programmeData","useMeteo","programme","setTimeout","executerProgramme","confirm","journal","volumeReel","deleteProgramme","today","Date","toISOString","split","getStatutBadgeClass","statut","getStationName","stationId","station","find","s","nom","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\HP\\Desktop\\alternance\\itbs_3\\microservices\\irrigation-system\\frontend\\irrigation-ui\\src\\app\\components\\programmes\\programmes.component.html","C:\\Users\\HP\\Desktop\\alternance\\itbs_3\\microservices\\irrigation-system\\frontend\\irrigation-ui\\src\\app\\components\\programmes\\programmes.component.ts"],"sourcesContent":["<div>\r\n  <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;\">\r\n    <h2>üíß Programmes d'Arrosage</h2>\r\n    <button class=\"btn btn-primary\" (click)=\"toggleForm()\">\r\n      {{ showForm ? '‚ùå Annuler' : '‚ûï Nouveau Programme' }}\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"alert alert-success\" *ngIf=\"success\">\r\n    {{ success }}\r\n  </div>\r\n\r\n  <div class=\"alert alert-error\" *ngIf=\"error\">\r\n    {{ error }}\r\n  </div>\r\n\r\n  <!-- Formulaire de cr√©ation -->\r\n  <div class=\"card\" *ngIf=\"showForm\">\r\n    <h3>Nouveau Programme d'Arrosage</h3>\r\n    <form (ngSubmit)=\"createProgramme()\">\r\n      <div class=\"form-group\">\r\n        <label for=\"dateDebut\">Date de D√©but *</label>\r\n        <input \r\n          type=\"date\" \r\n          id=\"dateDebut\" \r\n          [(ngModel)]=\"newProgramme.dateDebut\" \r\n          name=\"dateDebut\" \r\n          required>\r\n      </div>\r\n\r\n      <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 15px;\">\r\n        <div class=\"form-group\">\r\n          <label for=\"heure\">Heure (0-23) *</label>\r\n          <input \r\n            type=\"number\" \r\n            id=\"heure\" \r\n            [(ngModel)]=\"newProgramme.heure\" \r\n            name=\"heure\" \r\n            min=\"0\" \r\n            max=\"23\" \r\n            required>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"duree\">Dur√©e (minutes) *</label>\r\n          <input \r\n            type=\"number\" \r\n            id=\"duree\" \r\n            [(ngModel)]=\"newProgramme.duree\" \r\n            name=\"duree\" \r\n            min=\"1\" \r\n            required>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"volumeEau\">Volume d'Eau (Litres) *</label>\r\n        <input \r\n          type=\"number\" \r\n          id=\"volumeEau\" \r\n          [(ngModel)]=\"newProgramme.volumeEau\" \r\n          name=\"volumeEau\" \r\n          min=\"1\" \r\n          step=\"0.1\" \r\n          required>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"etatPrevuInitial\">√âtat Initial *</label>\r\n        <select id=\"etatPrevuInitial\" [(ngModel)]=\"newProgramme.etatPrevuInitial\" name=\"etatPrevuInitial\" required>\r\n          <option value=\"PLANIFIE\">PLANIFIE</option>\r\n          <option value=\"AJUSTE\">AJUSTE</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div class=\"form-group\" style=\"display: flex; align-items: center; gap: 10px;\">\r\n        <input \r\n          type=\"checkbox\" \r\n          id=\"useMeteo\" \r\n          [(ngModel)]=\"useMeteo\" \r\n          name=\"useMeteo\">\r\n        <label for=\"useMeteo\" style=\"margin: 0;\">üå§Ô∏è Utiliser les donn√©es m√©t√©o pour ajuster automatiquement</label>\r\n      </div>\r\n\r\n      <div class=\"form-group\" *ngIf=\"useMeteo && stations.length > 0\">\r\n        <label for=\"stationMeteoId\">Station M√©t√©o</label>\r\n        <select id=\"stationMeteoId\" [(ngModel)]=\"newProgramme.stationMeteoId\" name=\"stationMeteoId\">\r\n          <option *ngFor=\"let station of stations\" [value]=\"station.id\">\r\n            {{ station.nom }}\r\n          </option>\r\n        </select>\r\n      </div>\r\n\r\n      <button type=\"submit\" class=\"btn btn-success\" [disabled]=\"loading\">\r\n        {{ loading ? 'Cr√©ation...' : '‚úÖ Cr√©er le Programme' }}\r\n      </button>\r\n    </form>\r\n  </div>\r\n\r\n  <!-- Liste des programmes -->\r\n  <div *ngIf=\"loading && !showForm\" class=\"loading\">\r\n    Chargement des programmes\r\n  </div>\r\n\r\n  <div class=\"grid\" *ngIf=\"!loading && programmes.length > 0\">\r\n    <div class=\"card\" *ngFor=\"let programme of programmes\">\r\n      <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;\">\r\n        <h3>üíß Programme #{{ programme.id }}</h3>\r\n        <span class=\"badge\" [ngClass]=\"getStatutBadgeClass(programme.etatPrevuInitial)\">\r\n          {{ programme.etatPrevuInitial }}\r\n        </span>\r\n      </div>\r\n      <p><strong>üìÖ Date:</strong> {{ programme.dateDebut }} √† {{ programme.heure }}h</p>\r\n      <p><strong>‚è±Ô∏è Dur√©e:</strong> {{ programme.duree }} minutes</p>\r\n      <p><strong>üíß Volume:</strong> {{ programme.volumeEau }} L</p>\r\n      <div *ngIf=\"programme.temperatureMax\">\r\n        <p><strong>üå°Ô∏è Temp√©rature Max:</strong> {{ programme.temperatureMax }}¬∞C</p>\r\n        <p><strong>üå°Ô∏è Temp√©rature Min:</strong> {{ programme.temperatureMin }}¬∞C</p>\r\n        <p><strong>üåßÔ∏è Pluie:</strong> {{ programme.pluiePrevue ? 'Oui' : 'Non' }}</p>\r\n        <p><strong>üí® Vent:</strong> {{ programme.vent }} km/h</p>\r\n      </div>\r\n      <div style=\"margin-top: 15px; display: flex; gap: 10px;\">\r\n        <button class=\"btn btn-success\" (click)=\"executerProgramme(programme.id!)\">\r\n          ‚ñ∂Ô∏è Ex√©cuter\r\n        </button>\r\n        <button class=\"btn btn-danger\" (click)=\"deleteProgramme(programme.id!)\">\r\n          üóëÔ∏è Supprimer\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"!loading && programmes.length === 0 && !showForm\" style=\"text-align: center; padding: 40px; color: #999;\">\r\n    <p style=\"font-size: 18px;\">Aucun programme d'arrosage enregistr√©.</p>\r\n    <p>Cliquez sur \"Nouveau Programme\" pour en cr√©er un.</p>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ArrosageService, ProgrammeArrosage } from '../../services/arrosage.service';\r\nimport { MeteoService, Station } from '../../services/meteo.service';\r\n\r\n@Component({\r\n  selector: 'app-programmes',\r\n  templateUrl: './programmes.component.html',\r\n  styleUrls: ['./programmes.component.css']\r\n})\r\nexport class ProgrammesComponent implements OnInit {\r\n  programmes: ProgrammeArrosage[] = [];\r\n  stations: Station[] = [];\r\n  loading = false;\r\n  error: string | null = null;\r\n  success: string | null = null;\r\n  showForm = false;\r\n  useMeteo = false;\r\n\r\n  newProgramme: any = {\r\n    dateDebut: '',\r\n    heure: 8,\r\n    duree: 30,\r\n    volumeEau: 100,\r\n    etatPrevuInitial: 'PLANIFIE',\r\n    stationMeteoId: 0\r\n  };\r\n\r\n  constructor(\r\n    private arrosageService: ArrosageService,\r\n    private meteoService: MeteoService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadProgrammes();\r\n    this.loadStations();\r\n  }\r\n\r\n  loadProgrammes(): void {\r\n    this.loading = true;\r\n    this.error = null;\r\n    \r\n    this.arrosageService.getAllProgrammes().subscribe({\r\n      next: (data) => {\r\n        this.programmes = data;\r\n        this.loading = false;\r\n      },\r\n      error: (err) => {\r\n        this.error = 'Erreur lors du chargement des programmes: ' + err.message;\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  loadStations(): void {\r\n    this.meteoService.getAllStations().subscribe({\r\n      next: (data) => {\r\n        this.stations = data;\r\n        if (data.length > 0) {\r\n          this.newProgramme.stationMeteoId = data[0].id;\r\n        }\r\n      },\r\n      error: (err) => {\r\n        console.error('Erreur lors du chargement des stations:', err);\r\n      }\r\n    });\r\n  }\r\n\r\n  toggleForm(): void {\r\n    this.showForm = !this.showForm;\r\n    if (!this.showForm) {\r\n      this.resetForm();\r\n    }\r\n  }\r\n\r\n  createProgramme(): void {\r\n    this.loading = true;\r\n    this.error = null;\r\n    this.success = null;\r\n\r\n    const programmeData = {\r\n      dateDebut: this.newProgramme.dateDebut,\r\n      heure: this.newProgramme.heure,\r\n      duree: this.newProgramme.duree,\r\n      volumeEau: this.newProgramme.volumeEau,\r\n      etatPrevuInitial: this.newProgramme.etatPrevuInitial\r\n    };\r\n\r\n    if (this.useMeteo && this.newProgramme.stationMeteoId) {\r\n      programmeData['stationMeteoId'] = this.newProgramme.stationMeteoId;\r\n    }\r\n\r\n    this.arrosageService.createProgramme(programmeData as any).subscribe({\r\n      next: (programme) => {\r\n        this.success = 'Programme d\\'arrosage cr√©√© avec succ√®s!';\r\n        this.loadProgrammes();\r\n        this.resetForm();\r\n        this.showForm = false;\r\n        setTimeout(() => this.success = null, 3000);\r\n      },\r\n      error: (err) => {\r\n        this.error = 'Erreur lors de la cr√©ation: ' + err.message;\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  executerProgramme(id: number): void {\r\n    if (confirm('Voulez-vous ex√©cuter ce programme maintenant ?')) {\r\n      this.arrosageService.executerProgramme(id).subscribe({\r\n        next: (journal) => {\r\n          this.success = `Programme ex√©cut√©! Journal #${journal.id} cr√©√© avec ${journal.volumeReel}L`;\r\n          this.loadProgrammes();\r\n          setTimeout(() => this.success = null, 5000);\r\n        },\r\n        error: (err) => {\r\n          this.error = 'Erreur lors de l\\'ex√©cution: ' + err.message;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  deleteProgramme(id: number): void {\r\n    if (confirm('√ätes-vous s√ªr de vouloir supprimer ce programme ?')) {\r\n      this.arrosageService.deleteProgramme(id).subscribe({\r\n        next: () => {\r\n          this.success = 'Programme supprim√© avec succ√®s!';\r\n          this.loadProgrammes();\r\n          setTimeout(() => this.success = null, 3000);\r\n        },\r\n        error: (err) => {\r\n          this.error = 'Erreur lors de la suppression: ' + err.message;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  resetForm(): void {\r\n    const today = new Date().toISOString().split('T')[0];\r\n    this.newProgramme = {\r\n      dateDebut: today,\r\n      heure: 8,\r\n      duree: 30,\r\n      volumeEau: 100,\r\n      etatPrevuInitial: 'PLANIFIE',\r\n      stationMeteoId: this.stations.length > 0 ? this.stations[0].id : 0\r\n    };\r\n    this.useMeteo = false;\r\n  }\r\n\r\n  getStatutBadgeClass(statut: string): string {\r\n    switch (statut) {\r\n      case 'PLANIFIE': return 'badge-info';\r\n      case 'AJUSTE': return 'badge-warning';\r\n      case 'TERMINE': return 'badge-success';\r\n      case 'IGNORE': return 'badge-danger';\r\n      default: return 'badge-info';\r\n    }\r\n  }\r\n\r\n  getStationName(stationId: number): string {\r\n    const station = this.stations.find(s => s.id === stationId);\r\n    return station ? station.nom : `Station #${stationId}`;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}