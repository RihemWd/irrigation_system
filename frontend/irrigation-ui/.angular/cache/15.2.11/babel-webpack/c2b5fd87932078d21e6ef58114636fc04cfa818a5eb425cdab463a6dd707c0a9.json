{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/meteo.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction PrevisionsComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 8);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(1);\n    i0.…µ…µtextInterpolate1(\" \", ctx_r0.success, \" \");\n  }\n}\nfunction PrevisionsComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 9);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(1);\n    i0.…µ…µtextInterpolate1(\" \", ctx_r1.error, \" \");\n  }\n}\nfunction PrevisionsComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 9);\n    i0.…µ…µtext(1, \" \\u26A0\\uFE0F Aucune station disponible. Veuillez d'abord cr\\u00E9er une station m\\u00E9t\\u00E9o. \");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction PrevisionsComponent_div_9_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"option\", 30);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const station_r8 = ctx.$implicit;\n    i0.…µ…µproperty(\"value\", station_r8.id);\n    i0.…µ…µadvance(1);\n    i0.…µ…µtextInterpolate3(\" \", station_r8.nom, \" (\", station_r8.latitude, \", \", station_r8.longitude, \") \");\n  }\n}\nfunction PrevisionsComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 10)(1, \"h3\");\n    i0.…µ…µtext(2, \"Nouvelle Pr\\u00E9vision M\\u00E9t\\u00E9o\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"form\", 11);\n    i0.…µ…µlistener(\"ngSubmit\", function PrevisionsComponent_div_9_Template_form_ngSubmit_3_listener() {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r9 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r9.createPrevision());\n    });\n    i0.…µ…µelementStart(4, \"div\", 12)(5, \"label\", 13);\n    i0.…µ…µtext(6, \"Station M\\u00E9t\\u00E9o *\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(7, \"select\", 14);\n    i0.…µ…µlistener(\"ngModelChange\", function PrevisionsComponent_div_9_Template_select_ngModelChange_7_listener($event) {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r11 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r11.newPrevision.stationId = $event);\n    });\n    i0.…µ…µtemplate(8, PrevisionsComponent_div_9_option_8_Template, 2, 4, \"option\", 15);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(9, \"div\", 16)(10, \"div\", 12)(11, \"label\", 17);\n    i0.…µ…µtext(12, \"Date D\\u00E9but *\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(13, \"input\", 18);\n    i0.…µ…µlistener(\"ngModelChange\", function PrevisionsComponent_div_9_Template_input_ngModelChange_13_listener($event) {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r12 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r12.newPrevision.dateDebut = $event);\n    });\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(14, \"div\", 12)(15, \"label\", 19);\n    i0.…µ…µtext(16, \"Date Fin *\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(17, \"input\", 20);\n    i0.…µ…µlistener(\"ngModelChange\", function PrevisionsComponent_div_9_Template_input_ngModelChange_17_listener($event) {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r13 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r13.newPrevision.dateFin = $event);\n    });\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µelementStart(18, \"div\", 16)(19, \"div\", 12)(20, \"label\", 21);\n    i0.…µ…µtext(21, \"Temp\\u00E9rature Max (\\u00B0C) *\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(22, \"input\", 22);\n    i0.…µ…µlistener(\"ngModelChange\", function PrevisionsComponent_div_9_Template_input_ngModelChange_22_listener($event) {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r14 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r14.newPrevision.temperatureMax = $event);\n    });\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(23, \"div\", 12)(24, \"label\", 23);\n    i0.…µ…µtext(25, \"Temp\\u00E9rature Min (\\u00B0C) *\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(26, \"input\", 24);\n    i0.…µ…µlistener(\"ngModelChange\", function PrevisionsComponent_div_9_Template_input_ngModelChange_26_listener($event) {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r15 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r15.newPrevision.temperatureMin = $event);\n    });\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µelementStart(27, \"div\", 16)(28, \"div\", 12)(29, \"label\", 25);\n    i0.…µ…µtext(30, \"Pluie Pr\\u00E9vue (mm) *\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(31, \"input\", 26);\n    i0.…µ…µlistener(\"ngModelChange\", function PrevisionsComponent_div_9_Template_input_ngModelChange_31_listener($event) {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r16 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r16.newPrevision.pluiePrevue = $event);\n    });\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(32, \"div\", 12)(33, \"label\", 27);\n    i0.…µ…µtext(34, \"Vent (km/h) *\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(35, \"input\", 28);\n    i0.…µ…µlistener(\"ngModelChange\", function PrevisionsComponent_div_9_Template_input_ngModelChange_35_listener($event) {\n      i0.…µ…µrestoreView(_r10);\n      const ctx_r17 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r17.newPrevision.vent = $event);\n    });\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µelementStart(36, \"button\", 29);\n    i0.…µ…µtext(37);\n    i0.…µ…µelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(7);\n    i0.…µ…µproperty(\"ngModel\", ctx_r3.newPrevision.stationId);\n    i0.…µ…µadvance(1);\n    i0.…µ…µproperty(\"ngForOf\", ctx_r3.stations);\n    i0.…µ…µadvance(5);\n    i0.…µ…µproperty(\"ngModel\", ctx_r3.newPrevision.dateDebut);\n    i0.…µ…µadvance(4);\n    i0.…µ…µproperty(\"ngModel\", ctx_r3.newPrevision.dateFin);\n    i0.…µ…µadvance(5);\n    i0.…µ…µproperty(\"ngModel\", ctx_r3.newPrevision.temperatureMax);\n    i0.…µ…µadvance(4);\n    i0.…µ…µproperty(\"ngModel\", ctx_r3.newPrevision.temperatureMin);\n    i0.…µ…µadvance(5);\n    i0.…µ…µproperty(\"ngModel\", ctx_r3.newPrevision.pluiePrevue);\n    i0.…µ…µadvance(4);\n    i0.…µ…µproperty(\"ngModel\", ctx_r3.newPrevision.vent);\n    i0.…µ…µadvance(1);\n    i0.…µ…µproperty(\"disabled\", ctx_r3.loading);\n    i0.…µ…µadvance(1);\n    i0.…µ…µtextInterpolate1(\" \", ctx_r3.loading ? \"Cr\\u00E9ation...\" : \"\\u2705 Cr\\u00E9er la Pr\\u00E9vision (+ Event RabbitMQ)\", \" \");\n  }\n}\nfunction PrevisionsComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 31);\n    i0.…µ…µtext(1, \" Chargement des pr\\u00E9visions \");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction PrevisionsComponent_div_11_div_1_p_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"p\")(1, \"strong\");\n    i0.…µ…µtext(2, \"\\uD83D\\uDCCD Station:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(3);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const prevision_r19 = i0.…µ…µnextContext().$implicit;\n    const ctx_r20 = i0.…µ…µnextContext(2);\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate1(\" \", ctx_r20.getStationName(prevision_r19.stationId), \"\");\n  }\n}\nfunction PrevisionsComponent_div_11_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 10)(1, \"h3\");\n    i0.…µ…µtext(2);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"p\")(4, \"strong\");\n    i0.…µ…µtext(5, \"\\uD83D\\uDCC5 P\\u00E9riode:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(6);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(7, \"p\")(8, \"strong\");\n    i0.…µ…µtext(9, \"\\uD83C\\uDF21\\uFE0F Temp\\u00E9ratures:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(10);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(11, \"p\")(12, \"strong\");\n    i0.…µ…µtext(13, \"\\uD83C\\uDF27\\uFE0F Pluie:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(14);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(15, \"p\")(16, \"strong\");\n    i0.…µ…µtext(17, \"\\uD83D\\uDCA8 Vent:\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µtext(18);\n    i0.…µ…µelementEnd();\n    i0.…µ…µtemplate(19, PrevisionsComponent_div_11_div_1_p_19_Template, 4, 1, \"p\", 34);\n    i0.…µ…µelementStart(20, \"div\", 35)(21, \"button\", 36);\n    i0.…µ…µlistener(\"click\", function PrevisionsComponent_div_11_div_1_Template_button_click_21_listener() {\n      const restoredCtx = i0.…µ…µrestoreView(_r23);\n      const prevision_r19 = restoredCtx.$implicit;\n      const ctx_r22 = i0.…µ…µnextContext(2);\n      return i0.…µ…µresetView(ctx_r22.deletePrevision(prevision_r19.id));\n    });\n    i0.…µ…µtext(22, \" \\uD83D\\uDDD1\\uFE0F Supprimer \");\n    i0.…µ…µelementEnd()()();\n  }\n  if (rf & 2) {\n    const prevision_r19 = ctx.$implicit;\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate1(\"\\uD83C\\uDF24\\uFE0F Pr\\u00E9vision #\", prevision_r19.id, \"\");\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate2(\" \", prevision_r19.dateDebut, \" \\u2192 \", prevision_r19.dateFin, \"\");\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate2(\" \", prevision_r19.temperatureMin, \"\\u00B0C ~ \", prevision_r19.temperatureMax, \"\\u00B0C\");\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate1(\" \", prevision_r19.pluiePrevue, \" mm\");\n    i0.…µ…µadvance(4);\n    i0.…µ…µtextInterpolate1(\" \", prevision_r19.vent, \" km/h\");\n    i0.…µ…µadvance(1);\n    i0.…µ…µproperty(\"ngIf\", prevision_r19.stationId);\n  }\n}\nfunction PrevisionsComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 32);\n    i0.…µ…µtemplate(1, PrevisionsComponent_div_11_div_1_Template, 23, 8, \"div\", 33);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(1);\n    i0.…µ…µproperty(\"ngForOf\", ctx_r5.previsions);\n  }\n}\nfunction PrevisionsComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 37)(1, \"p\", 38);\n    i0.…µ…µtext(2, \"Aucune pr\\u00E9vision enregistr\\u00E9e.\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"p\");\n    i0.…µ…µtext(4, \"Cliquez sur \\\"Nouvelle Pr\\u00E9vision\\\" pour en cr\\u00E9er une.\");\n    i0.…µ…µelementEnd()();\n  }\n}\nexport class PrevisionsComponent {\n  constructor(meteoService) {\n    this.meteoService = meteoService;\n    this.previsions = [];\n    this.stations = [];\n    this.loading = false;\n    this.error = null;\n    this.success = null;\n    this.showForm = false;\n    this.newPrevision = {\n      stationId: 0,\n      dateDebut: '',\n      dateFin: '',\n      temperatureMax: 20,\n      temperatureMin: 10,\n      pluiePrevue: 0,\n      vent: 10\n    };\n  }\n  ngOnInit() {\n    this.loadPrevisions();\n    this.loadStations();\n  }\n  loadPrevisions() {\n    this.loading = true;\n    this.error = null;\n    this.meteoService.getAllPrevisions().subscribe({\n      next: data => {\n        this.previsions = data;\n        this.loading = false;\n      },\n      error: err => {\n        this.error = 'Erreur lors du chargement des pr√©visions: ' + err.message;\n        this.loading = false;\n      }\n    });\n  }\n  loadStations() {\n    this.meteoService.getAllStations().subscribe({\n      next: data => {\n        this.stations = data;\n        if (data.length > 0) {\n          this.newPrevision.stationId = data[0].id;\n        }\n      },\n      error: err => {\n        console.error('Erreur lors du chargement des stations:', err);\n      }\n    });\n  }\n  toggleForm() {\n    this.showForm = !this.showForm;\n    if (!this.showForm) {\n      this.resetForm();\n    }\n  }\n  createPrevision() {\n    this.loading = true;\n    this.error = null;\n    this.success = null;\n    this.meteoService.createPrevision(this.newPrevision).subscribe({\n      next: prevision => {\n        this.success = 'Pr√©vision cr√©√©e avec succ√®s! (Event RabbitMQ publi√©)';\n        this.loadPrevisions();\n        this.resetForm();\n        this.showForm = false;\n        setTimeout(() => this.success = null, 3000);\n      },\n      error: err => {\n        this.error = 'Erreur lors de la cr√©ation: ' + err.message;\n        this.loading = false;\n      }\n    });\n  }\n  deletePrevision(id) {\n    if (confirm('√ätes-vous s√ªr de vouloir supprimer cette pr√©vision ?')) {\n      this.meteoService.deletePrevision(id).subscribe({\n        next: () => {\n          this.success = 'Pr√©vision supprim√©e avec succ√®s!';\n          this.loadPrevisions();\n          setTimeout(() => this.success = null, 3000);\n        },\n        error: err => {\n          this.error = 'Erreur lors de la suppression: ' + err.message;\n        }\n      });\n    }\n  }\n  resetForm() {\n    const today = new Date().toISOString().split('T')[0];\n    this.newPrevision = {\n      stationId: this.stations.length > 0 ? this.stations[0].id : 0,\n      dateDebut: today,\n      dateFin: today,\n      temperatureMax: 20,\n      temperatureMin: 10,\n      pluiePrevue: 0,\n      vent: 10\n    };\n  }\n  getStationName(stationId) {\n    const station = this.stations.find(s => s.id === stationId);\n    return station ? station.nom : `Station #${stationId}`;\n  }\n  static {\n    this.…µfac = function PrevisionsComponent_Factory(t) {\n      return new (t || PrevisionsComponent)(i0.…µ…µdirectiveInject(i1.MeteoService));\n    };\n  }\n  static {\n    this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n      type: PrevisionsComponent,\n      selectors: [[\"app-previsions\"]],\n      decls: 13,\n      vars: 9,\n      consts: [[2, \"display\", \"flex\", \"justify-content\", \"space-between\", \"align-items\", \"center\", \"margin-bottom\", \"20px\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [\"class\", \"alert alert-error\", 4, \"ngIf\"], [\"class\", \"card\", 4, \"ngIf\"], [\"class\", \"loading\", 4, \"ngIf\"], [\"class\", \"grid\", 4, \"ngIf\"], [\"style\", \"text-align: center; padding: 40px; color: #999;\", 4, \"ngIf\"], [1, \"alert\", \"alert-success\"], [1, \"alert\", \"alert-error\"], [1, \"card\"], [3, \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"stationId\"], [\"id\", \"stationId\", \"name\", \"stationId\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [2, \"display\", \"grid\", \"grid-template-columns\", \"1fr 1fr\", \"gap\", \"15px\"], [\"for\", \"dateDebut\"], [\"type\", \"date\", \"id\", \"dateDebut\", \"name\", \"dateDebut\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"dateFin\"], [\"type\", \"date\", \"id\", \"dateFin\", \"name\", \"dateFin\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"temperatureMax\"], [\"type\", \"number\", \"id\", \"temperatureMax\", \"name\", \"temperatureMax\", \"step\", \"0.1\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"temperatureMin\"], [\"type\", \"number\", \"id\", \"temperatureMin\", \"name\", \"temperatureMin\", \"step\", \"0.1\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"pluiePrevue\"], [\"type\", \"number\", \"id\", \"pluiePrevue\", \"name\", \"pluiePrevue\", \"step\", \"0.1\", \"min\", \"0\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"vent\"], [\"type\", \"number\", \"id\", \"vent\", \"name\", \"vent\", \"step\", \"1\", \"min\", \"0\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-success\", 3, \"disabled\"], [3, \"value\"], [1, \"loading\"], [1, \"grid\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [2, \"margin-top\", \"15px\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [2, \"text-align\", \"center\", \"padding\", \"40px\", \"color\", \"#999\"], [2, \"font-size\", \"18px\"]],\n      template: function PrevisionsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.…µ…µelementStart(0, \"div\")(1, \"div\", 0)(2, \"h2\");\n          i0.…µ…µtext(3, \"\\uD83C\\uDF24\\uFE0F Pr\\u00E9visions M\\u00E9t\\u00E9o\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(4, \"button\", 1);\n          i0.…µ…µlistener(\"click\", function PrevisionsComponent_Template_button_click_4_listener() {\n            return ctx.toggleForm();\n          });\n          i0.…µ…µtext(5);\n          i0.…µ…µelementEnd()();\n          i0.…µ…µtemplate(6, PrevisionsComponent_div_6_Template, 2, 1, \"div\", 2);\n          i0.…µ…µtemplate(7, PrevisionsComponent_div_7_Template, 2, 1, \"div\", 3);\n          i0.…µ…µtemplate(8, PrevisionsComponent_div_8_Template, 2, 0, \"div\", 3);\n          i0.…µ…µtemplate(9, PrevisionsComponent_div_9_Template, 38, 10, \"div\", 4);\n          i0.…µ…µtemplate(10, PrevisionsComponent_div_10_Template, 2, 0, \"div\", 5);\n          i0.…µ…µtemplate(11, PrevisionsComponent_div_11_Template, 2, 1, \"div\", 6);\n          i0.…µ…µtemplate(12, PrevisionsComponent_div_12_Template, 5, 0, \"div\", 7);\n          i0.…µ…µelementEnd();\n        }\n        if (rf & 2) {\n          i0.…µ…µadvance(4);\n          i0.…µ…µproperty(\"disabled\", ctx.stations.length === 0);\n          i0.…µ…µadvance(1);\n          i0.…µ…µtextInterpolate1(\" \", ctx.showForm ? \"\\u274C Annuler\" : \"\\u2795 Nouvelle Pr\\u00E9vision\", \" \");\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", ctx.success);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", ctx.error);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", ctx.stations.length === 0 && !ctx.loading);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", ctx.showForm && ctx.stations.length > 0);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", ctx.loading && !ctx.showForm);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", !ctx.loading && ctx.previsions.length > 0);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", !ctx.loading && ctx.previsions.length === 0 && !ctx.showForm);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.…µNgNoValidate, i3.NgSelectOption, i3.…µNgSelectMultipleOption, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.MinValidator, i3.NgModel, i3.NgForm],\n      styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9wcmV2aXNpb25zL3ByZXZpc2lvbnMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQ0FBZ0MiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBQcmV2aXNpb25zIENvbXBvbmVudCBTdHlsZXMgKi9cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":";;;;;;IAQEA,8BAAiD;IAC/CA,YACF;IAAAA,iBAAM;;;;IADJA,eACF;IADEA,+CACF;;;;;IAEAA,8BAA6C;IAC3CA,YACF;IAAAA,iBAAM;;;;IADJA,eACF;IADEA,6CACF;;;;;IAEAA,8BAAyE;IACvEA,kHACF;IAAAA,iBAAM;;;;;IASEA,kCAA8D;IAC5DA,YACF;IAAAA,iBAAS;;;;IAFgCA,qCAAoB;IAC3DA,eACF;IADEA,uGACF;;;;;;IARRA,+BAA0D;IACpDA,uDAAwB;IAAAA,iBAAK;IACjCA,gCAAqC;IAA/BA;MAAAA;MAAA;MAAA,OAAYA,uCAAiB;IAAA,EAAC;IAClCA,+BAAwB;IACCA,yCAAe;IAAAA,iBAAQ;IAC9CA,kCAAsF;IAA/DA;MAAAA;MAAA;MAAA,OAAaA,uDAA8B;IAAA,EAAP;IACzDA,iFAES;IACXA,iBAAS;IAGXA,+BAAuE;IAE5CA,kCAAY;IAAAA,iBAAQ;IAC3CA,kCAKW;IAFTA;MAAAA;MAAA;MAAA,OAAaA,uDACrB;IAAA,EAD4C;IAHtCA,iBAKW;IAGbA,gCAAwB;IACDA,2BAAU;IAAAA,iBAAQ;IACvCA,kCAKW;IAFTA;MAAAA;MAAA;MAAA,OAAaA,qDACrB;IAAA,EAD0C;IAHpCA,iBAKW;IAIfA,gCAAuE;IAEvCA,iDAAsB;IAAAA,iBAAQ;IAC1DA,kCAMW;IAHTA;MAAAA;MAAA;MAAA,OAAaA,4DACrB;IAAA,EADiD;IAH3CA,iBAMW;IAGbA,gCAAwB;IACMA,iDAAsB;IAAAA,iBAAQ;IAC1DA,kCAMW;IAHTA;MAAAA;MAAA;MAAA,OAAaA,4DACrB;IAAA,EADiD;IAH3CA,iBAMW;IAIfA,gCAAuE;IAE1CA,yCAAmB;IAAAA,iBAAQ;IACpDA,kCAOW;IAJTA;MAAAA;MAAA;MAAA,OAAaA,yDACrB;IAAA,EAD8C;IAHxCA,iBAOW;IAGbA,gCAAwB;IACJA,8BAAa;IAAAA,iBAAQ;IACvCA,kCAOW;IAJTA;MAAAA;MAAA;MAAA,OAAaA,kDACrB;IAAA,EADuC;IAHjCA,iBAOW;IAIfA,mCAAmE;IACjEA,aACF;IAAAA,iBAAS;;;;IAjFgBA,eAAoC;IAApCA,uDAAoC;IAC7BA,eAAW;IAAXA,yCAAW;IAYrCA,eAAoC;IAApCA,uDAAoC;IAUpCA,eAAkC;IAAlCA,qDAAkC;IAYlCA,eAAyC;IAAzCA,4DAAyC;IAWzCA,eAAyC;IAAzCA,4DAAyC;IAazCA,eAAsC;IAAtCA,yDAAsC;IAYtCA,eAA+B;IAA/BA,kDAA+B;IAQSA,eAAoB;IAApBA,yCAAoB;IAChEA,eACF;IADEA,+HACF;;;;;IAKJA,+BAAkD;IAChDA,gDACF;IAAAA,iBAAM;;;;;IASFA,yBAA+B;IAAQA,qCAAW;IAAAA,iBAAS;IAACA,YAAyC;IAAAA,iBAAI;;;;;IAA7CA,eAAyC;IAAzCA,+EAAyC;;;;;;IANvGA,+BAAuD;IACjDA,YAAiC;IAAAA,iBAAK;IAC1CA,yBAAG;IAAQA,0CAAW;IAAAA,iBAAS;IAACA,YAAmD;IAAAA,iBAAI;IACvFA,yBAAG;IAAQA,qDAAiB;IAAAA,iBAAS;IAACA,aAAmE;IAAAA,iBAAI;IAC7GA,0BAAG;IAAQA,0CAAU;IAAAA,iBAAS;IAACA,aAA8B;IAAAA,iBAAI;IACjEA,0BAAG;IAAQA,mCAAQ;IAAAA,iBAAS;IAACA,aAAyB;IAAAA,iBAAI;IAC1DA,gFAAyG;IACzGA,gCAA+B;IACEA;MAAA;MAAA;MAAA;MAAA,OAASA,wDAA8B;IAAA,EAAC;IACrEA,+CACF;IAAAA,iBAAS;;;;IATPA,eAAiC;IAAjCA,kFAAiC;IACLA,eAAmD;IAAnDA,0FAAmD;IAC7CA,eAAmE;IAAnEA,+GAAmE;IAC1EA,eAA8B;IAA9BA,4DAA8B;IAChCA,eAAyB;IAAzBA,uDAAyB;IAClDA,eAAyB;IAAzBA,8CAAyB;;;;;IAPjCA,+BAA4D;IAC1DA,6EAYM;IACRA,iBAAM;;;;IAboCA,eAAa;IAAbA,2CAAa;;;;;IAevDA,+BAAsH;IACxFA,uDAA6B;IAAAA,iBAAI;IAC7DA,yBAAG;IAAAA,+EAAmD;IAAAA,iBAAI;;;AC9H9D,OAAM,MAAOC,mBAAmB;EAkB9BC,YAAoBC,YAA0B;IAA1B,iBAAY,GAAZA,YAAY;IAjBhC,eAAU,GAAgB,EAAE;IAC5B,aAAQ,GAAc,EAAE;IACxB,YAAO,GAAG,KAAK;IACf,UAAK,GAAkB,IAAI;IAC3B,YAAO,GAAkB,IAAI;IAC7B,aAAQ,GAAG,KAAK;IAEhB,iBAAY,GAAQ;MAClBC,SAAS,EAAE,CAAC;MACZC,SAAS,EAAE,EAAE;MACbC,OAAO,EAAE,EAAE;MACXC,cAAc,EAAE,EAAE;MAClBC,cAAc,EAAE,EAAE;MAClBC,WAAW,EAAE,CAAC;MACdC,IAAI,EAAE;KACP;EAEgD;EAEjDC,QAAQ;IACN,IAAI,CAACC,cAAc,EAAE;IACrB,IAAI,CAACC,YAAY,EAAE;EACrB;EAEAD,cAAc;IACZ,IAAI,CAACE,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,KAAK,GAAG,IAAI;IAEjB,IAAI,CAACZ,YAAY,CAACa,gBAAgB,EAAE,CAACC,SAAS,CAAC;MAC7CC,IAAI,EAAGC,IAAI,IAAI;QACb,IAAI,CAACC,UAAU,GAAGD,IAAI;QACtB,IAAI,CAACL,OAAO,GAAG,KAAK;MACtB,CAAC;MACDC,KAAK,EAAGM,GAAG,IAAI;QACb,IAAI,CAACN,KAAK,GAAG,4CAA4C,GAAGM,GAAG,CAACC,OAAO;QACvE,IAAI,CAACR,OAAO,GAAG,KAAK;MACtB;KACD,CAAC;EACJ;EAEAD,YAAY;IACV,IAAI,CAACV,YAAY,CAACoB,cAAc,EAAE,CAACN,SAAS,CAAC;MAC3CC,IAAI,EAAGC,IAAI,IAAI;QACb,IAAI,CAACK,QAAQ,GAAGL,IAAI;QACpB,IAAIA,IAAI,CAACM,MAAM,GAAG,CAAC,EAAE;UACnB,IAAI,CAACC,YAAY,CAACtB,SAAS,GAAGe,IAAI,CAAC,CAAC,CAAC,CAACQ,EAAE;;MAE5C,CAAC;MACDZ,KAAK,EAAGM,GAAG,IAAI;QACbO,OAAO,CAACb,KAAK,CAAC,yCAAyC,EAAEM,GAAG,CAAC;MAC/D;KACD,CAAC;EACJ;EAEAQ,UAAU;IACR,IAAI,CAACC,QAAQ,GAAG,CAAC,IAAI,CAACA,QAAQ;IAC9B,IAAI,CAAC,IAAI,CAACA,QAAQ,EAAE;MAClB,IAAI,CAACC,SAAS,EAAE;;EAEpB;EAEAC,eAAe;IACb,IAAI,CAAClB,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,KAAK,GAAG,IAAI;IACjB,IAAI,CAACkB,OAAO,GAAG,IAAI;IAEnB,IAAI,CAAC9B,YAAY,CAAC6B,eAAe,CAAC,IAAI,CAACN,YAAY,CAAC,CAACT,SAAS,CAAC;MAC7DC,IAAI,EAAGgB,SAAS,IAAI;QAClB,IAAI,CAACD,OAAO,GAAG,sDAAsD;QACrE,IAAI,CAACrB,cAAc,EAAE;QACrB,IAAI,CAACmB,SAAS,EAAE;QAChB,IAAI,CAACD,QAAQ,GAAG,KAAK;QACrBK,UAAU,CAAC,MAAM,IAAI,CAACF,OAAO,GAAG,IAAI,EAAE,IAAI,CAAC;MAC7C,CAAC;MACDlB,KAAK,EAAGM,GAAG,IAAI;QACb,IAAI,CAACN,KAAK,GAAG,8BAA8B,GAAGM,GAAG,CAACC,OAAO;QACzD,IAAI,CAACR,OAAO,GAAG,KAAK;MACtB;KACD,CAAC;EACJ;EAEAsB,eAAe,CAACT,EAAU;IACxB,IAAIU,OAAO,CAAC,sDAAsD,CAAC,EAAE;MACnE,IAAI,CAAClC,YAAY,CAACiC,eAAe,CAACT,EAAE,CAAC,CAACV,SAAS,CAAC;QAC9CC,IAAI,EAAE,MAAK;UACT,IAAI,CAACe,OAAO,GAAG,kCAAkC;UACjD,IAAI,CAACrB,cAAc,EAAE;UACrBuB,UAAU,CAAC,MAAM,IAAI,CAACF,OAAO,GAAG,IAAI,EAAE,IAAI,CAAC;QAC7C,CAAC;QACDlB,KAAK,EAAGM,GAAG,IAAI;UACb,IAAI,CAACN,KAAK,GAAG,iCAAiC,GAAGM,GAAG,CAACC,OAAO;QAC9D;OACD,CAAC;;EAEN;EAEAS,SAAS;IACP,MAAMO,KAAK,GAAG,IAAIC,IAAI,EAAE,CAACC,WAAW,EAAE,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACpD,IAAI,CAACf,YAAY,GAAG;MAClBtB,SAAS,EAAE,IAAI,CAACoB,QAAQ,CAACC,MAAM,GAAG,CAAC,GAAG,IAAI,CAACD,QAAQ,CAAC,CAAC,CAAC,CAACG,EAAE,GAAG,CAAC;MAC7DtB,SAAS,EAAEiC,KAAK;MAChBhC,OAAO,EAAEgC,KAAK;MACd/B,cAAc,EAAE,EAAE;MAClBC,cAAc,EAAE,EAAE;MAClBC,WAAW,EAAE,CAAC;MACdC,IAAI,EAAE;KACP;EACH;EAEAgC,cAAc,CAACtC,SAAiB;IAC9B,MAAMuC,OAAO,GAAG,IAAI,CAACnB,QAAQ,CAACoB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAAClB,EAAE,KAAKvB,SAAS,CAAC;IAC3D,OAAOuC,OAAO,GAAGA,OAAO,CAACG,GAAG,GAAG,YAAY1C,SAAS,EAAE;EACxD;;;uBAjHWH,mBAAmB;IAAA;EAAA;;;YAAnBA,mBAAmB;MAAA8C;MAAAC;MAAAC;MAAAC;MAAAC;QAAA;UDRhCnD,2BAAK;UAEGA,kEAAoB;UAAAA,iBAAK;UAC7BA,iCAA0F;UAA1DA;YAAA,OAASoD,gBAAY;UAAA,EAAC;UACpDpD,YACF;UAAAA,iBAAS;UAGXA,oEAEM;UAENA,oEAEM;UAENA,oEAEM;UAGNA,sEAwFM;UAGNA,sEAEM;UAENA,sEAcM;UAENA,sEAGM;UACRA,iBAAM;;;UArIqDA,eAAkC;UAAlCA,oDAAkC;UACvFA,eACF;UADEA,mGACF;UAGgCA,eAAa;UAAbA,kCAAa;UAIfA,eAAW;UAAXA,gCAAW;UAIXA,eAAuC;UAAvCA,gEAAuC;UAKpDA,eAAqC;UAArCA,8DAAqC;UA2FlDA,eAA0B;UAA1BA,mDAA0B;UAIbA,eAAuC;UAAvCA,gEAAuC;UAgBpDA,eAAsD;UAAtDA,mFAAsD","names":["i0","PrevisionsComponent","constructor","meteoService","stationId","dateDebut","dateFin","temperatureMax","temperatureMin","pluiePrevue","vent","ngOnInit","loadPrevisions","loadStations","loading","error","getAllPrevisions","subscribe","next","data","previsions","err","message","getAllStations","stations","length","newPrevision","id","console","toggleForm","showForm","resetForm","createPrevision","success","prevision","setTimeout","deletePrevision","confirm","today","Date","toISOString","split","getStationName","station","find","s","nom","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\HP\\Desktop\\alternance\\itbs_3\\microservices\\irrigation-system\\frontend\\irrigation-ui\\src\\app\\components\\previsions\\previsions.component.html","C:\\Users\\HP\\Desktop\\alternance\\itbs_3\\microservices\\irrigation-system\\frontend\\irrigation-ui\\src\\app\\components\\previsions\\previsions.component.ts"],"sourcesContent":["<div>\r\n  <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;\">\r\n    <h2>üå§Ô∏è Pr√©visions M√©t√©o</h2>\r\n    <button class=\"btn btn-primary\" (click)=\"toggleForm()\" [disabled]=\"stations.length === 0\">\r\n      {{ showForm ? '‚ùå Annuler' : '‚ûï Nouvelle Pr√©vision' }}\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"alert alert-success\" *ngIf=\"success\">\r\n    {{ success }}\r\n  </div>\r\n\r\n  <div class=\"alert alert-error\" *ngIf=\"error\">\r\n    {{ error }}\r\n  </div>\r\n\r\n  <div class=\"alert alert-error\" *ngIf=\"stations.length === 0 && !loading\">\r\n    ‚ö†Ô∏è Aucune station disponible. Veuillez d'abord cr√©er une station m√©t√©o.\r\n  </div>\r\n\r\n  <!-- Formulaire de cr√©ation -->\r\n  <div class=\"card\" *ngIf=\"showForm && stations.length > 0\">\r\n    <h3>Nouvelle Pr√©vision M√©t√©o</h3>\r\n    <form (ngSubmit)=\"createPrevision()\">\r\n      <div class=\"form-group\">\r\n        <label for=\"stationId\">Station M√©t√©o *</label>\r\n        <select id=\"stationId\" [(ngModel)]=\"newPrevision.stationId\" name=\"stationId\" required>\r\n          <option *ngFor=\"let station of stations\" [value]=\"station.id\">\r\n            {{ station.nom }} ({{ station.latitude }}, {{ station.longitude }})\r\n          </option>\r\n        </select>\r\n      </div>\r\n\r\n      <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 15px;\">\r\n        <div class=\"form-group\">\r\n          <label for=\"dateDebut\">Date D√©but *</label>\r\n          <input \r\n            type=\"date\" \r\n            id=\"dateDebut\" \r\n            [(ngModel)]=\"newPrevision.dateDebut\" \r\n            name=\"dateDebut\" \r\n            required>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"dateFin\">Date Fin *</label>\r\n          <input \r\n            type=\"date\" \r\n            id=\"dateFin\" \r\n            [(ngModel)]=\"newPrevision.dateFin\" \r\n            name=\"dateFin\" \r\n            required>\r\n        </div>\r\n      </div>\r\n\r\n      <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 15px;\">\r\n        <div class=\"form-group\">\r\n          <label for=\"temperatureMax\">Temp√©rature Max (¬∞C) *</label>\r\n          <input \r\n            type=\"number\" \r\n            id=\"temperatureMax\" \r\n            [(ngModel)]=\"newPrevision.temperatureMax\" \r\n            name=\"temperatureMax\" \r\n            step=\"0.1\" \r\n            required>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"temperatureMin\">Temp√©rature Min (¬∞C) *</label>\r\n          <input \r\n            type=\"number\" \r\n            id=\"temperatureMin\" \r\n            [(ngModel)]=\"newPrevision.temperatureMin\" \r\n            name=\"temperatureMin\" \r\n            step=\"0.1\" \r\n            required>\r\n        </div>\r\n      </div>\r\n\r\n      <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 15px;\">\r\n        <div class=\"form-group\">\r\n          <label for=\"pluiePrevue\">Pluie Pr√©vue (mm) *</label>\r\n          <input \r\n            type=\"number\" \r\n            id=\"pluiePrevue\" \r\n            [(ngModel)]=\"newPrevision.pluiePrevue\" \r\n            name=\"pluiePrevue\" \r\n            step=\"0.1\" \r\n            min=\"0\" \r\n            required>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"vent\">Vent (km/h) *</label>\r\n          <input \r\n            type=\"number\" \r\n            id=\"vent\" \r\n            [(ngModel)]=\"newPrevision.vent\" \r\n            name=\"vent\" \r\n            step=\"1\" \r\n            min=\"0\" \r\n            required>\r\n        </div>\r\n      </div>\r\n\r\n      <button type=\"submit\" class=\"btn btn-success\" [disabled]=\"loading\">\r\n        {{ loading ? 'Cr√©ation...' : '‚úÖ Cr√©er la Pr√©vision (+ Event RabbitMQ)' }}\r\n      </button>\r\n    </form>\r\n  </div>\r\n\r\n  <!-- Liste des pr√©visions -->\r\n  <div *ngIf=\"loading && !showForm\" class=\"loading\">\r\n    Chargement des pr√©visions\r\n  </div>\r\n\r\n  <div class=\"grid\" *ngIf=\"!loading && previsions.length > 0\">\r\n    <div class=\"card\" *ngFor=\"let prevision of previsions\">\r\n      <h3>üå§Ô∏è Pr√©vision #{{ prevision.id }}</h3>\r\n      <p><strong>üìÖ P√©riode:</strong> {{ prevision.dateDebut }} ‚Üí {{ prevision.dateFin }}</p>\r\n      <p><strong>üå°Ô∏è Temp√©ratures:</strong> {{ prevision.temperatureMin }}¬∞C ~ {{ prevision.temperatureMax }}¬∞C</p>\r\n      <p><strong>üåßÔ∏è Pluie:</strong> {{ prevision.pluiePrevue }} mm</p>\r\n      <p><strong>üí® Vent:</strong> {{ prevision.vent }} km/h</p>\r\n      <p *ngIf=\"prevision.stationId\"><strong>üìç Station:</strong> {{ getStationName(prevision.stationId) }}</p>\r\n      <div style=\"margin-top: 15px;\">\r\n        <button class=\"btn btn-danger\" (click)=\"deletePrevision(prevision.id!)\">\r\n          üóëÔ∏è Supprimer\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"!loading && previsions.length === 0 && !showForm\" style=\"text-align: center; padding: 40px; color: #999;\">\r\n    <p style=\"font-size: 18px;\">Aucune pr√©vision enregistr√©e.</p>\r\n    <p>Cliquez sur \"Nouvelle Pr√©vision\" pour en cr√©er une.</p>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MeteoService, Prevision, Station } from '../../services/meteo.service';\r\n\r\n@Component({\r\n  selector: 'app-previsions',\r\n  templateUrl: './previsions.component.html',\r\n  styleUrls: ['./previsions.component.css']\r\n})\r\nexport class PrevisionsComponent implements OnInit {\r\n  previsions: Prevision[] = [];\r\n  stations: Station[] = [];\r\n  loading = false;\r\n  error: string | null = null;\r\n  success: string | null = null;\r\n  showForm = false;\r\n\r\n  newPrevision: any = {\r\n    stationId: 0,\r\n    dateDebut: '',\r\n    dateFin: '',\r\n    temperatureMax: 20,\r\n    temperatureMin: 10,\r\n    pluiePrevue: 0,\r\n    vent: 10\r\n  };\r\n\r\n  constructor(private meteoService: MeteoService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadPrevisions();\r\n    this.loadStations();\r\n  }\r\n\r\n  loadPrevisions(): void {\r\n    this.loading = true;\r\n    this.error = null;\r\n    \r\n    this.meteoService.getAllPrevisions().subscribe({\r\n      next: (data) => {\r\n        this.previsions = data;\r\n        this.loading = false;\r\n      },\r\n      error: (err) => {\r\n        this.error = 'Erreur lors du chargement des pr√©visions: ' + err.message;\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  loadStations(): void {\r\n    this.meteoService.getAllStations().subscribe({\r\n      next: (data) => {\r\n        this.stations = data;\r\n        if (data.length > 0) {\r\n          this.newPrevision.stationId = data[0].id;\r\n        }\r\n      },\r\n      error: (err) => {\r\n        console.error('Erreur lors du chargement des stations:', err);\r\n      }\r\n    });\r\n  }\r\n\r\n  toggleForm(): void {\r\n    this.showForm = !this.showForm;\r\n    if (!this.showForm) {\r\n      this.resetForm();\r\n    }\r\n  }\r\n\r\n  createPrevision(): void {\r\n    this.loading = true;\r\n    this.error = null;\r\n    this.success = null;\r\n\r\n    this.meteoService.createPrevision(this.newPrevision).subscribe({\r\n      next: (prevision) => {\r\n        this.success = 'Pr√©vision cr√©√©e avec succ√®s! (Event RabbitMQ publi√©)';\r\n        this.loadPrevisions();\r\n        this.resetForm();\r\n        this.showForm = false;\r\n        setTimeout(() => this.success = null, 3000);\r\n      },\r\n      error: (err) => {\r\n        this.error = 'Erreur lors de la cr√©ation: ' + err.message;\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  deletePrevision(id: number): void {\r\n    if (confirm('√ätes-vous s√ªr de vouloir supprimer cette pr√©vision ?')) {\r\n      this.meteoService.deletePrevision(id).subscribe({\r\n        next: () => {\r\n          this.success = 'Pr√©vision supprim√©e avec succ√®s!';\r\n          this.loadPrevisions();\r\n          setTimeout(() => this.success = null, 3000);\r\n        },\r\n        error: (err) => {\r\n          this.error = 'Erreur lors de la suppression: ' + err.message;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  resetForm(): void {\r\n    const today = new Date().toISOString().split('T')[0];\r\n    this.newPrevision = {\r\n      stationId: this.stations.length > 0 ? this.stations[0].id : 0,\r\n      dateDebut: today,\r\n      dateFin: today,\r\n      temperatureMax: 20,\r\n      temperatureMin: 10,\r\n      pluiePrevue: 0,\r\n      vent: 10\r\n    };\r\n  }\r\n\r\n  getStationName(stationId: number): string {\r\n    const station = this.stations.find(s => s.id === stationId);\r\n    return station ? station.nom : `Station #${stationId}`;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}