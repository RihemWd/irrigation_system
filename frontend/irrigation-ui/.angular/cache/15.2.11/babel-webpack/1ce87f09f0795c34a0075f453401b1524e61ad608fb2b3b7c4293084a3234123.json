{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/arrosage.service\";\nimport * as i2 from \"@angular/common\";\nfunction JournauxComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 6);\n    i0.…µ…µtext(1);\n    i0.…µ…µelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(1);\n    i0.…µ…µtextInterpolate1(\" \", ctx_r0.error, \" \");\n  }\n}\nfunction JournauxComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 7);\n    i0.…µ…µtext(1, \" Chargement des journaux d'ex\\u00E9cution \");\n    i0.…µ…µelementEnd();\n  }\n}\nfunction JournauxComponent_div_8_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"tr\")(1, \"td\")(2, \"strong\");\n    i0.…µ…µtext(3);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(4, \"td\");\n    i0.…µ…µtext(5);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(6, \"td\");\n    i0.…µ…µtext(7);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(8, \"td\")(9, \"strong\");\n    i0.…µ…µtext(10);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(11, \"td\")(12, \"span\", 9);\n    i0.…µ…µtext(13);\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(14, \"td\");\n    i0.…µ…µtext(15);\n    i0.…µ…µelementEnd()();\n  }\n  if (rf & 2) {\n    const journal_r5 = ctx.$implicit;\n    const ctx_r4 = i0.…µ…µnextContext(2);\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate1(\"#\", journal_r5.id, \"\");\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate1(\"Programme #\", journal_r5.programmeId, \"\");\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(ctx_r4.formatDate(journal_r5.dateExecution));\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate1(\"\", journal_r5.volumeReel, \" L\");\n    i0.…µ…µadvance(2);\n    i0.…µ…µproperty(\"ngClass\", ctx_r4.getTypeExecutionBadgeClass(journal_r5.typeExecution));\n    i0.…µ…µadvance(1);\n    i0.…µ…µtextInterpolate1(\" \", journal_r5.typeExecution, \" \");\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(journal_r5.remarque || \"Aucune remarque\");\n  }\n}\nfunction JournauxComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\")(1, \"table\")(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.…µ…µtext(5, \"ID\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(6, \"th\");\n    i0.…µ…µtext(7, \"Programme\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(8, \"th\");\n    i0.…µ…µtext(9, \"Date d'Ex\\u00E9cution\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(10, \"th\");\n    i0.…µ…µtext(11, \"Volume R\\u00E9el (L)\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(12, \"th\");\n    i0.…µ…µtext(13, \"Type\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(14, \"th\");\n    i0.…µ…µtext(15, \"Remarque\");\n    i0.…µ…µelementEnd()()();\n    i0.…µ…µelementStart(16, \"tbody\");\n    i0.…µ…µtemplate(17, JournauxComponent_div_8_tr_17_Template, 16, 7, \"tr\", 8);\n    i0.…µ…µelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.…µ…µnextContext();\n    i0.…µ…µadvance(17);\n    i0.…µ…µproperty(\"ngForOf\", ctx_r2.journaux);\n  }\n}\nfunction JournauxComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.…µ…µelementStart(0, \"div\", 10)(1, \"p\", 11);\n    i0.…µ…µtext(2, \"Aucune ex\\u00E9cution enregistr\\u00E9e.\");\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(3, \"p\");\n    i0.…µ…µtext(4, \"Les journaux appara\\u00EEtront ici apr\\u00E8s l'ex\\u00E9cution des programmes d'arrosage.\");\n    i0.…µ…µelementEnd()();\n  }\n}\nexport class JournauxComponent {\n  constructor(arrosageService) {\n    this.arrosageService = arrosageService;\n    this.journaux = [];\n    this.loading = false;\n    this.error = null;\n  }\n  ngOnInit() {\n    this.loadJournaux();\n  }\n  loadJournaux() {\n    this.loading = true;\n    this.error = null;\n    this.arrosageService.getAllJournaux().subscribe({\n      next: data => {\n        this.journaux = data.sort((a, b) => {\n          return new Date(b.dateExecution).getTime() - new Date(a.dateExecution).getTime();\n        });\n        this.loading = false;\n      },\n      error: err => {\n        this.error = 'Erreur lors du chargement des journaux: ' + err.message;\n        this.loading = false;\n      }\n    });\n  }\n  getTypeExecutionBadgeClass(type) {\n    switch (type) {\n      case 'MANUEL':\n        return 'badge-info';\n      case 'AUTOMATIQUE':\n        return 'badge-success';\n      case 'AJUSTE_METEO':\n        return 'badge-warning';\n      default:\n        return 'badge-info';\n    }\n  }\n  formatDate(dateString) {\n    const date = new Date(dateString);\n    return date.toLocaleString('fr-FR');\n  }\n  static {\n    this.…µfac = function JournauxComponent_Factory(t) {\n      return new (t || JournauxComponent)(i0.…µ…µdirectiveInject(i1.ArrosageService));\n    };\n  }\n  static {\n    this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n      type: JournauxComponent,\n      selectors: [[\"app-journaux\"]],\n      decls: 10,\n      vars: 4,\n      consts: [[2, \"display\", \"flex\", \"justify-content\", \"space-between\", \"align-items\", \"center\", \"margin-bottom\", \"20px\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"class\", \"alert alert-error\", 4, \"ngIf\"], [\"class\", \"loading\", 4, \"ngIf\"], [4, \"ngIf\"], [\"style\", \"text-align: center; padding: 40px; color: #999;\", 4, \"ngIf\"], [1, \"alert\", \"alert-error\"], [1, \"loading\"], [4, \"ngFor\", \"ngForOf\"], [1, \"badge\", 3, \"ngClass\"], [2, \"text-align\", \"center\", \"padding\", \"40px\", \"color\", \"#999\"], [2, \"font-size\", \"18px\"]],\n      template: function JournauxComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.…µ…µelementStart(0, \"div\")(1, \"div\", 0)(2, \"h2\");\n          i0.…µ…µtext(3, \"\\uD83D\\uDCCB Journal d'Ex\\u00E9cution\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(4, \"button\", 1);\n          i0.…µ…µlistener(\"click\", function JournauxComponent_Template_button_click_4_listener() {\n            return ctx.loadJournaux();\n          });\n          i0.…µ…µtext(5, \" \\uD83D\\uDD04 Actualiser \");\n          i0.…µ…µelementEnd()();\n          i0.…µ…µtemplate(6, JournauxComponent_div_6_Template, 2, 1, \"div\", 2);\n          i0.…µ…µtemplate(7, JournauxComponent_div_7_Template, 2, 0, \"div\", 3);\n          i0.…µ…µtemplate(8, JournauxComponent_div_8_Template, 18, 1, \"div\", 4);\n          i0.…µ…µtemplate(9, JournauxComponent_div_9_Template, 5, 0, \"div\", 5);\n          i0.…µ…µelementEnd();\n        }\n        if (rf & 2) {\n          i0.…µ…µadvance(6);\n          i0.…µ…µproperty(\"ngIf\", ctx.error);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", ctx.loading);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", !ctx.loading && ctx.journaux.length > 0);\n          i0.…µ…µadvance(1);\n          i0.…µ…µproperty(\"ngIf\", !ctx.loading && ctx.journaux.length === 0);\n        }\n      },\n      dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf],\n      styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9qb3VybmF1eC9qb3VybmF1eC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDhCQUE4QiIsInNvdXJjZXNDb250ZW50IjpbIi8qIEpvdXJuYXV4IENvbXBvbmVudCBTdHlsZXMgKi9cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","JournauxComponent","constructor","arrosageService","ngOnInit","loadJournaux","loading","error","getAllJournaux","subscribe","next","data","journaux","sort","a","b","Date","dateExecution","getTime","err","message","getTypeExecutionBadgeClass","type","formatDate","dateString","date","toLocaleString","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\HP\\Desktop\\alternance\\itbs_3\\microservices\\irrigation-system\\frontend\\irrigation-ui\\src\\app\\components\\journaux\\journaux.component.html","C:\\Users\\HP\\Desktop\\alternance\\itbs_3\\microservices\\irrigation-system\\frontend\\irrigation-ui\\src\\app\\components\\journaux\\journaux.component.ts"],"sourcesContent":["<div>\r\n  <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;\">\r\n    <h2>üìã Journal d'Ex√©cution</h2>\r\n    <button class=\"btn btn-primary\" (click)=\"loadJournaux()\">\r\n      üîÑ Actualiser\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"alert alert-error\" *ngIf=\"error\">\r\n    {{ error }}\r\n  </div>\r\n\r\n  <!-- Liste des journaux -->\r\n  <div *ngIf=\"loading\" class=\"loading\">\r\n    Chargement des journaux d'ex√©cution\r\n  </div>\r\n\r\n  <div *ngIf=\"!loading && journaux.length > 0\">\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th>ID</th>\r\n          <th>Programme</th>\r\n          <th>Date d'Ex√©cution</th>\r\n          <th>Volume R√©el (L)</th>\r\n          <th>Type</th>\r\n          <th>Remarque</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngFor=\"let journal of journaux\">\r\n          <td><strong>#{{ journal.id }}</strong></td>\r\n          <td>Programme #{{ journal.programmeId }}</td>\r\n          <td>{{ formatDate(journal.dateExecution) }}</td>\r\n          <td><strong>{{ journal.volumeReel }} L</strong></td>\r\n          <td>\r\n            <span class=\"badge\" [ngClass]=\"getTypeExecutionBadgeClass(journal.typeExecution)\">\r\n              {{ journal.typeExecution }}\r\n            </span>\r\n          </td>\r\n          <td>{{ journal.remarque || 'Aucune remarque' }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n\r\n  <div *ngIf=\"!loading && journaux.length === 0\" style=\"text-align: center; padding: 40px; color: #999;\">\r\n    <p style=\"font-size: 18px;\">Aucune ex√©cution enregistr√©e.</p>\r\n    <p>Les journaux appara√Ætront ici apr√®s l'ex√©cution des programmes d'arrosage.</p>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ArrosageService, JournalArrosage } from '../../services/arrosage.service';\r\n\r\n@Component({\r\n  selector: 'app-journaux',\r\n  templateUrl: './journaux.component.html',\r\n  styleUrls: ['./journaux.component.css']\r\n})\r\nexport class JournauxComponent implements OnInit {\r\n  journaux: JournalArrosage[] = [];\r\n  loading = false;\r\n  error: string | null = null;\r\n\r\n  constructor(private arrosageService: ArrosageService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadJournaux();\r\n  }\r\n\r\n  loadJournaux(): void {\r\n    this.loading = true;\r\n    this.error = null;\r\n    \r\n    this.arrosageService.getAllJournaux().subscribe({\r\n      next: (data) => {\r\n        this.journaux = data.sort((a, b) => {\r\n          return new Date(b.dateExecution).getTime() - new Date(a.dateExecution).getTime();\r\n        });\r\n        this.loading = false;\r\n      },\r\n      error: (err) => {\r\n        this.error = 'Erreur lors du chargement des journaux: ' + err.message;\r\n        this.loading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  getTypeExecutionBadgeClass(type: string): string {\r\n    switch (type) {\r\n      case 'MANUEL': return 'badge-info';\r\n      case 'AUTOMATIQUE': return 'badge-success';\r\n      case 'AJUSTE_METEO': return 'badge-warning';\r\n      default: return 'badge-info';\r\n    }\r\n  }\r\n\r\n  formatDate(dateString: string): string {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleString('fr-FR');\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}