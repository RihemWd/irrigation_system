{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ArrosageService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = 'http://localhost:8080/api/arrosage';\n  }\n  // Programmes\n  getAllProgrammes() {\n    return this.http.get(`${this.apiUrl}/programmes`);\n  }\n  getProgrammeById(id) {\n    return this.http.get(`${this.apiUrl}/programmes/${id}`);\n  }\n  getProgrammesByParcelle(parcelleId) {\n    return this.http.get(`${this.apiUrl}/programmes/parcelle/${parcelleId}`);\n  }\n  createProgramme(programme) {\n    return this.http.post(`${this.apiUrl}/programmes`, programme);\n  }\n  createProgrammeAvecMeteo(parcelleId, stationMeteoId, date) {\n    const params = new HttpParams().set('parcelleId', parcelleId.toString()).set('stationMeteoId', stationMeteoId.toString()).set('date', date);\n    return this.http.post(`${this.apiUrl}/programmes/avec-meteo`, null, {\n      params\n    });\n  }\n  updateProgramme(id, programme) {\n    return this.http.put(`${this.apiUrl}/programmes/${id}`, programme);\n  }\n  deleteProgramme(id) {\n    return this.http.delete(`${this.apiUrl}/programmes/${id}`);\n  }\n  executerProgramme(id) {\n    return this.http.post(`${this.apiUrl}/programmes/${id}/executer`, null);\n  }\n  // Journaux\n  getAllJournaux() {\n    return this.http.get(`${this.apiUrl}/journaux`);\n  }\n  getJournalById(id) {\n    return this.http.get(`${this.apiUrl}/journaux/${id}`);\n  }\n  getJournauxByProgramme(programmeId) {\n    return this.http.get(`${this.apiUrl}/journaux/programme/${programmeId}`);\n  }\n  createJournal(journal) {\n    return this.http.post(`${this.apiUrl}/journaux`, journal);\n  }\n  static {\n    this.ɵfac = function ArrosageService_Factory(t) {\n      return new (t || ArrosageService)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: ArrosageService,\n      factory: ArrosageService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"mappings":"AACA,SAAqBA,UAAU,QAAQ,sBAAsB;;;AA6B7D,OAAM,MAAOC,eAAe;EAG1BC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IAFhB,WAAM,GAAG,oCAAoC;EAEd;EAEvC;EACAC,gBAAgB;IACd,OAAO,IAAI,CAACD,IAAI,CAACE,GAAG,CAAsB,GAAG,IAAI,CAACC,MAAM,aAAa,CAAC;EACxE;EAEAC,gBAAgB,CAACC,EAAU;IACzB,OAAO,IAAI,CAACL,IAAI,CAACE,GAAG,CAAoB,GAAG,IAAI,CAACC,MAAM,eAAeE,EAAE,EAAE,CAAC;EAC5E;EAEAC,uBAAuB,CAACC,UAAkB;IACxC,OAAO,IAAI,CAACP,IAAI,CAACE,GAAG,CAAsB,GAAG,IAAI,CAACC,MAAM,wBAAwBI,UAAU,EAAE,CAAC;EAC/F;EAEAC,eAAe,CAACC,SAA4B;IAC1C,OAAO,IAAI,CAACT,IAAI,CAACU,IAAI,CAAoB,GAAG,IAAI,CAACP,MAAM,aAAa,EAAEM,SAAS,CAAC;EAClF;EAEAE,wBAAwB,CAACJ,UAAkB,EAAEK,cAAsB,EAAEC,IAAY;IAC/E,MAAMC,MAAM,GAAG,IAAIjB,UAAU,EAAE,CAC5BkB,GAAG,CAAC,YAAY,EAAER,UAAU,CAACS,QAAQ,EAAE,CAAC,CACxCD,GAAG,CAAC,gBAAgB,EAAEH,cAAc,CAACI,QAAQ,EAAE,CAAC,CAChDD,GAAG,CAAC,MAAM,EAAEF,IAAI,CAAC;IACpB,OAAO,IAAI,CAACb,IAAI,CAACU,IAAI,CAAoB,GAAG,IAAI,CAACP,MAAM,wBAAwB,EAAE,IAAI,EAAE;MAAEW;IAAM,CAAE,CAAC;EACpG;EAEAG,eAAe,CAACZ,EAAU,EAAEI,SAA4B;IACtD,OAAO,IAAI,CAACT,IAAI,CAACkB,GAAG,CAAoB,GAAG,IAAI,CAACf,MAAM,eAAeE,EAAE,EAAE,EAAEI,SAAS,CAAC;EACvF;EAEAU,eAAe,CAACd,EAAU;IACxB,OAAO,IAAI,CAACL,IAAI,CAACoB,MAAM,CAAO,GAAG,IAAI,CAACjB,MAAM,eAAeE,EAAE,EAAE,CAAC;EAClE;EAEAgB,iBAAiB,CAAChB,EAAU;IAC1B,OAAO,IAAI,CAACL,IAAI,CAACU,IAAI,CAAkB,GAAG,IAAI,CAACP,MAAM,eAAeE,EAAE,WAAW,EAAE,IAAI,CAAC;EAC1F;EAEA;EACAiB,cAAc;IACZ,OAAO,IAAI,CAACtB,IAAI,CAACE,GAAG,CAAoB,GAAG,IAAI,CAACC,MAAM,WAAW,CAAC;EACpE;EAEAoB,cAAc,CAAClB,EAAU;IACvB,OAAO,IAAI,CAACL,IAAI,CAACE,GAAG,CAAkB,GAAG,IAAI,CAACC,MAAM,aAAaE,EAAE,EAAE,CAAC;EACxE;EAEAmB,sBAAsB,CAACC,WAAmB;IACxC,OAAO,IAAI,CAACzB,IAAI,CAACE,GAAG,CAAoB,GAAG,IAAI,CAACC,MAAM,uBAAuBsB,WAAW,EAAE,CAAC;EAC7F;EAEAC,aAAa,CAACC,OAAwB;IACpC,OAAO,IAAI,CAAC3B,IAAI,CAACU,IAAI,CAAkB,GAAG,IAAI,CAACP,MAAM,WAAW,EAAEwB,OAAO,CAAC;EAC5E;;;uBAzDW7B,eAAe;IAAA;EAAA;;;aAAfA,eAAe;MAAA8B,SAAf9B,eAAe;MAAA+B,YAFd;IAAM;EAAA","names":["HttpParams","ArrosageService","constructor","http","getAllProgrammes","get","apiUrl","getProgrammeById","id","getProgrammesByParcelle","parcelleId","createProgramme","programme","post","createProgrammeAvecMeteo","stationMeteoId","date","params","set","toString","updateProgramme","put","deleteProgramme","delete","executerProgramme","getAllJournaux","getJournalById","getJournauxByProgramme","programmeId","createJournal","journal","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\HP\\Desktop\\alternance\\itbs_3\\microservices\\irrigation-system\\frontend\\irrigation-ui\\src\\app\\services\\arrosage.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport interface ProgrammeArrosage {\r\n  id?: number;\r\n  dateDebut: string;\r\n  heure: number;\r\n  duree: number;\r\n  volumeEau: number;\r\n  etatPrevuInitial: string;\r\n  temperatureMax?: number;\r\n  temperatureMin?: number;\r\n  pluiePrevue?: boolean;\r\n  vent?: number;\r\n  stationMeteoId?: number;\r\n}\r\n\r\nexport interface JournalArrosage {\r\n  id?: number;\r\n  programmeId: number;\r\n  dateExecution: string;\r\n  volumeReel: number;\r\n  remarque: string;\r\n  typeExecution: string;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ArrosageService {\r\n  private apiUrl = 'http://localhost:8080/api/arrosage';\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  // Programmes\r\n  getAllProgrammes(): Observable<ProgrammeArrosage[]> {\r\n    return this.http.get<ProgrammeArrosage[]>(`${this.apiUrl}/programmes`);\r\n  }\r\n\r\n  getProgrammeById(id: number): Observable<ProgrammeArrosage> {\r\n    return this.http.get<ProgrammeArrosage>(`${this.apiUrl}/programmes/${id}`);\r\n  }\r\n\r\n  getProgrammesByParcelle(parcelleId: number): Observable<ProgrammeArrosage[]> {\r\n    return this.http.get<ProgrammeArrosage[]>(`${this.apiUrl}/programmes/parcelle/${parcelleId}`);\r\n  }\r\n\r\n  createProgramme(programme: ProgrammeArrosage): Observable<ProgrammeArrosage> {\r\n    return this.http.post<ProgrammeArrosage>(`${this.apiUrl}/programmes`, programme);\r\n  }\r\n\r\n  createProgrammeAvecMeteo(parcelleId: number, stationMeteoId: number, date: string): Observable<ProgrammeArrosage> {\r\n    const params = new HttpParams()\r\n      .set('parcelleId', parcelleId.toString())\r\n      .set('stationMeteoId', stationMeteoId.toString())\r\n      .set('date', date);\r\n    return this.http.post<ProgrammeArrosage>(`${this.apiUrl}/programmes/avec-meteo`, null, { params });\r\n  }\r\n\r\n  updateProgramme(id: number, programme: ProgrammeArrosage): Observable<ProgrammeArrosage> {\r\n    return this.http.put<ProgrammeArrosage>(`${this.apiUrl}/programmes/${id}`, programme);\r\n  }\r\n\r\n  deleteProgramme(id: number): Observable<void> {\r\n    return this.http.delete<void>(`${this.apiUrl}/programmes/${id}`);\r\n  }\r\n\r\n  executerProgramme(id: number): Observable<JournalArrosage> {\r\n    return this.http.post<JournalArrosage>(`${this.apiUrl}/programmes/${id}/executer`, null);\r\n  }\r\n\r\n  // Journaux\r\n  getAllJournaux(): Observable<JournalArrosage[]> {\r\n    return this.http.get<JournalArrosage[]>(`${this.apiUrl}/journaux`);\r\n  }\r\n\r\n  getJournalById(id: number): Observable<JournalArrosage> {\r\n    return this.http.get<JournalArrosage>(`${this.apiUrl}/journaux/${id}`);\r\n  }\r\n\r\n  getJournauxByProgramme(programmeId: number): Observable<JournalArrosage[]> {\r\n    return this.http.get<JournalArrosage[]>(`${this.apiUrl}/journaux/programme/${programmeId}`);\r\n  }\r\n\r\n  createJournal(journal: JournalArrosage): Observable<JournalArrosage> {\r\n    return this.http.post<JournalArrosage>(`${this.apiUrl}/journaux`, journal);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}